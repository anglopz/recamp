<% layout('layout/boilerplate') %>

<style>
    .register-container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 20px rgba(0,0,0,0.08);
        padding: 2rem;
        margin: 1rem 0;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
    }
    .register-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    .register-icon {
        background: linear-gradient(135deg, #0d6efd, #0dcaf0);
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
    }
    .register-btn {
        background: linear-gradient(135deg, #0d6efd, #0dcaf0);
        border: none;
        padding: 0.75rem 2rem;
        font-weight: 600;
        border-radius: 10px;
        transition: all 0.3s ease;
        width: 100%;
    }
    .register-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(13, 110, 253, 0.4);
    }
    .register-links {
        text-align: center;
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid #e9ecef;
    }
    .feature-card {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1rem;
        border-left: 4px solid #0d6efd;
    }
    .password-strength {
        height: 4px;
        background: #e9ecef;
        border-radius: 2px;
        margin-top: 0.5rem;
        overflow: hidden;
    }
    .password-strength-bar {
        height: 100%;
        width: 0%;
        transition: all 0.3s ease;
        border-radius: 2px;
    }
</style>

<div class="register-container">
    <!-- Header -->
    <div class="register-header">
        <div class="register-icon">
            <i class="bi bi-person-plus-fill text-white fs-2"></i>
        </div>
        <h1 class="h3 fw-bold text-primary mb-2">Join ReCamp</h1>
        <p class="text-muted">Create your account and start exploring amazing campgrounds</p>
    </div>

    <form action="/register" method="POST" class="validated-form" novalidate>
        <!-- Username Field -->
        <div class="mb-4">
            <label class="form-label fw-bold" for="username">
                <i class="bi bi-person me-2"></i>Username
            </label>
            <input class="form-control form-control-lg" type="text" id="username" name="username" 
                   placeholder="Choose a unique username" required autofocus>
            <div class="valid-feedback">
                <i class="bi bi-check-circle-fill"></i> Great username!
            </div>
            <div class="form-text">This will be your public display name</div>
        </div>

        <!-- Email Field -->
        <div class="mb-4">
            <label class="form-label fw-bold" for="email">
                <i class="bi bi-envelope me-2"></i>Email Address
            </label>
            <input class="form-control form-control-lg" type="email" id="email" name="email" 
                   placeholder="your.email@example.com" required>
            <div class="valid-feedback">
                <i class="bi bi-check-circle-fill"></i> Valid email!
            </div>
            <div class="form-text">We'll never share your email with anyone else</div>
        </div>

        <!-- Password Field -->
        <div class="mb-4">
            <label class="form-label fw-bold" for="password">
                <i class="bi bi-lock me-2"></i>Password
            </label>
            <input class="form-control form-control-lg" type="password" id="password" name="password" 
                   placeholder="Create a strong password" required minlength="6">
            <div class="password-strength">
                <div class="password-strength-bar" id="passwordStrength"></div>
            </div>
            <div class="valid-feedback">
                <i class="bi bi-check-circle-fill"></i> Strong password!
            </div>
            <div class="form-text">Minimum 6 characters</div>
        </div>

        <!-- Terms & Conditions -->
        <div class="mb-4">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                <label class="form-check-label" for="terms">
                    I agree to the <a href="/terms" class="text-primary text-decoration-none">Terms of Service</a> 
                    and <a href="/privacy" class="text-primary text-decoration-none">Privacy Policy</a>
                </label>
                <div class="invalid-feedback">
                    You must agree to the terms and conditions
                </div>
            </div>
        </div>

        <!-- Register Button -->
        <button type="submit" class="btn register-btn btn-lg mb-4">
            <i class="bi bi-person-plus-fill me-2"></i>Create Account
        </button>

        <!-- Benefits Section -->
        <div class="feature-card">
            <h6 class="fw-bold text-primary mb-3">
                <i class="bi bi-stars me-2"></i>Why Join ReCamp?
            </h6>
            <div class="row g-2">
                <div class="col-12">
                    <div class="d-flex align-items-center text-muted small">
                        <i class="bi bi-geo-alt text-primary me-2"></i>
                        <span>Discover amazing campgrounds worldwide</span>
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-flex align-items-center text-muted small">
                        <i class="bi bi-plus-circle text-primary me-2"></i>
                        <span>List your own campgrounds</span>
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-flex align-items-center text-muted small">
                        <i class="bi bi-chat-dots text-primary me-2"></i>
                        <span>Share reviews and experiences</span>
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-flex align-items-center text-muted small">
                        <i class="bi bi-heart text-primary me-2"></i>
                        <span>Save your favorite spots</span>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Login Link -->
    <div class="register-links">
        <p class="text-muted mb-3">Already have an account?</p>
        <a href="/login" class="btn btn-outline-primary">
            <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-focus on username field
        document.getElementById('username').focus();
        
        // Password strength indicator
        const passwordInput = document.getElementById('password');
        const strengthBar = document.getElementById('passwordStrength');
        
        passwordInput.addEventListener('input', function() {
            const password = this.value;
            let strength = 0;
            
            if (password.length >= 6) strength += 25;
            if (password.length >= 8) strength += 25;
            if (/[A-Z]/.test(password)) strength += 25;
            if (/[0-9]/.test(password)) strength += 25;
            
            strengthBar.style.width = strength + '%';
            
            // Change color based on strength
            if (strength < 50) {
                strengthBar.style.background = '#dc3545'; // Red
            } else if (strength < 75) {
                strengthBar.style.background = '#ffc107'; // Yellow
            } else {
                strengthBar.style.background = '#198754'; // Green
            }
        });
        
        // Form validation styling
        const form = document.querySelector('.validated-form');
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });
</script>